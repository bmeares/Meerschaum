volumes:
  timescaledb_volume:
  timescaledb-ha_volume:
  postgis_volume:
  mssql_volume:
  mariadb_volume:
  mysql_volume:
  oracle_volume:
  valkey_volume:
  postgresql_volume:

services:

  timescaledb:
    environment:
      TIMESCALEDB_TELEMETRY: "off"
      POSTGRES_DB: "testdb"
      POSTGRES_USER: "test"
      POSTGRES_PASSWORD: "test1234"
      ALLOW_IP_RANGE: "0.0.0.0/0"
    command: "postgres -c max_connections=1000 -c shared_buffers=1024MB -c max_prepared_transactions=100"
    ports:
      - "5439:5432"
    volumes:
      - "timescaledb_volume:/var/lib/postgresql/data"
    image: "timescale/timescaledb:latest-pg17"
    shm_size: "1gb"

  timescaledb_ha:
    environment:
      TIMESCALEDB_TELEMETRY: "off"
      POSTGRES_DB: "testdb"
      POSTGRES_USER: "test"
      POSTGRES_PASSWORD: "test1234"
      ALLOW_IP_RANGE: "0.0.0.0/0"
    command: "postgres -c max_connections=1000 -c shared_buffers=1024MB -c max_prepared_transactions=100"
    ports:
      - "5459:5432"
    volumes:
      - "timescaledb-ha_volume:/home/postgres/pgdata"
      - "./connector_resources/timescaledb_ha/initdb:/docker-entrypoint-initdb.d:z,ro"
    image: "timescale/timescaledb-ha:pg17"

  postgresql:
    environment:
      POSTGRES_DB: "testdb"
      POSTGRES_USER: "test"
      POSTGRES_PASSWORD: "test1234"
      ALLOW_IP_RANGE: "0.0.0.0/0"
    command: "postgres -c max_connections=1000 -c shared_buffers=1024MB -c max_prepared_transactions=100"
    ports:
      - "5559:5432"
    volumes:
      - "postgresql_volume:/var/lib/postgresql/data"
    image: "postgres:18"
    shm_size: "1gb"

  postgis:
    environment:
      POSTGRES_DB: "testdb"
      POSTGRES_USER: "test"
      POSTGRES_PASSWORD: "test1234"
      ALLOW_IP_RANGE: "0.0.0.0/0"
    command: "postgres -c max_connections=1000 -c shared_buffers=1024MB -c max_prepared_transactions=100"
    ports:
      - "5449:5432"
    volumes:
      - "postgis_volume:/var/lib/postgresql/data"
    image: "postgis/postgis:17-3.5"
    shm_size: "1gb"

  mssql:
    environment:
      ACCEPT_EULA: "Y"
      SA_PASSWORD: "supersecureSECRETPASSWORD123!"
    ports:
      - "1439:1433"
    image: "mcr.microsoft.com/mssql/server:2022-latest"
    volumes:
      - "mssql_volume:/var/opt/mssql"

  mariadb:
    environment:
      MARIADB_ROOT_PASSWORD: "my-secret-pw"
      MARIADB_USER: "test"
      MARIADB_PASSWORD: "test1234"
      MARIADB_DATABASE: "testdb"
      MARIADB_ROOT_HOST: "%"
    image: "mariadb"
    ports:
      - "3309:3306"
    volumes:
      - "mariadb_volume:/var/lib/mysql"

  mysql:
    environment:
      MYSQL_ROOT_PASSWORD: "my-secret-pw"
      MYSQL_USER: "test"
      MYSQL_PASSWORD: "test1234"
      MYSQL_DATABASE: "testdb"
    image: "cytopia/mysql-5.7"
    ports:
      - "3310:3306"
    volumes:
      - "mysql_volume:/var/lib/mysql"

  oracle:
    image: "container-registry.oracle.com/database/express:latest"
    ports:
      - "1529:1521"
    environment:
      ORACLE_PWD: "oracle"
    volumes:
      - "oracle_volume:/opt/oracle/oradata"

  valkey:
    image: "valkey/valkey"
    environment:
      ALLOW_EMPTY_PASSWORD: "yes"
    volumes:
      - "valkey_volume:/data"
    ports:
      - "6399:6379"
